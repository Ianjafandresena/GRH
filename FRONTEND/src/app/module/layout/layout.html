<div class="layout" [class.collapsed]="isCollapsed">
  <aside class="sidebar">
    <div class="sidebar-header">
      <h3 *ngIf="!isCollapsed">
        <div class="logo-container">
          <span class="logo-text">GRH</span>
          <span class="logo-sub">ARMP</span>
        </div>
      </h3>
      <div class="logo-icon" *ngIf="isCollapsed">
        <span>G</span>
      </div>
      <button class="toggle-btn" (click)="toggleSidebar()">
        <mat-icon>{{ isCollapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
      </button>
    </div>

    <nav>
      <a routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" title="Tableau de bord">
        <mat-icon>dashboard</mat-icon>
        <span *ngIf="!isCollapsed">Tableau de bord</span>
      </a>

      <div>
        <a (click)="toggleConge()" [class.active]="showConge" style="cursor:pointer;" title="Gestion des Congés">
          <div style="display:flex; align-items:center; gap:0.75rem;">
            <mat-icon>date_range</mat-icon>
            <span *ngIf="!isCollapsed">Gestion des Congés</span>
          </div>
          <mat-icon class="chevron" *ngIf="!isCollapsed">{{ showConge ? 'expand_less' : 'expand_more' }}</mat-icon>
        </a>
        <div *ngIf="showConge && !isCollapsed" class="submenu">
          <a routerLink="/conge/index" routerLinkActive="active">
            <mat-icon class="small-icon">history</mat-icon>
            <span>Historique</span>
          </a>
          <a routerLink="/conge/create" routerLinkActive="active">
            <mat-icon class="small-icon">add_circle_outline</mat-icon>
            <span>Création</span>
          </a>
        </div>
      </div>

      <div>
        <a (click)="togglePermission()" [class.active]="showPermission" style="cursor:pointer;" title="Permissions">
          <div style="display:flex; align-items:center; gap:0.75rem;">
            <mat-icon>schedule</mat-icon>
            <span *ngIf="!isCollapsed">Permissions</span>
          </div>
          <mat-icon class="chevron" *ngIf="!isCollapsed">{{ showPermission ? 'expand_less' : 'expand_more' }}</mat-icon>
        </a>
        <div *ngIf="showPermission && !isCollapsed" class="submenu">
          <a routerLink="/permission/index" routerLinkActive="active">
            <mat-icon class="small-icon">history</mat-icon>
            <span>Historique</span>
          </a>
          <a routerLink="/permission/create" routerLinkActive="active">
            <mat-icon class="small-icon">add_circle_outline</mat-icon>
            <span>Nouvelle permission</span>
          </a>
        </div>
      </div>

      <!-- Placeholder links -->
      <a style="opacity:0.7; cursor: not-allowed;" title="Remboursements">
        <mat-icon>favorite_border</mat-icon>
        <span *ngIf="!isCollapsed">Remboursements</span>
      </a>
      <a style="opacity:0.7; cursor: not-allowed;" title="Employés">
        <mat-icon>people_outline</mat-icon>
        <span *ngIf="!isCollapsed">Employés</span>
      </a>
      <a style="opacity:0.7; cursor: not-allowed;" title="Centres de Santé">
        <mat-icon>business</mat-icon>
        <span *ngIf="!isCollapsed">Centres de Santé</span>
      </a>
      <a routerLink="/parametre/index" routerLinkActive="active" title="Paramètres">
        <mat-icon>settings</mat-icon>
        <span *ngIf="!isCollapsed">Paramètres</span>
      </a>

    </nav>

    <div class="logout-section">
      <a (click)="logout()" style="cursor: pointer;" title="Déconnexion">
        <mat-icon>logout</mat-icon>
        <span *ngIf="!isCollapsed">Déconnexion</span>
      </a>
    </div>
  </aside>

  <section class="content">
    <app-header></app-header>
    <router-outlet></router-outlet>
    <footer class="footer">
      <span>© 2025 GRH ARMP - Tous droits réservés</span>
    </footer>
  </section>
</div>