<div class="layout" [class.collapsed]="isCollapsed">
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-container" *ngIf="!isCollapsed"
        style="display: flex; flex-direction: row; align-items: center; gap: 10px;">
        <img src="assets/logo.png" alt="Logo" style="height: 40px;">
        <span class="logo-text" style="font-size: 1.5rem; font-weight: bold; color: white;">GRH</span>
      </div>
      <div class="logo-icon" *ngIf="isCollapsed">
        <img src="assets/logo.png" alt="G" style="height: 30px;">
      </div>
      <button class="toggle-btn" (click)="toggleSidebar()">
        <mat-icon>{{ isCollapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
      </button>
    </div>

    <nav>
      <a routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" title="Tableau de bord">
        <mat-icon>dashboard</mat-icon>
        <span *ngIf="!isCollapsed">Tableau de bord</span>
      </a>

      <div>
        <a (click)="toggleConge()" [class.active]="showConge" style="cursor:pointer;" title="Gestion des Absences">
          <div style="display:flex; align-items:center; gap:0.75rem;">
            <mat-icon>event_available</mat-icon> <!-- üîÑ MODIFI√â: calendar ‚Üí event_available -->
            <span *ngIf="!isCollapsed">Gestion des Absences</span>
          </div>
          <mat-icon class="chevron" *ngIf="!isCollapsed">{{ showConge ? 'expand_less' : 'expand_more' }}</mat-icon>
        </a>
        <div *ngIf="showConge && !isCollapsed" class="submenu">
          <a routerLink="/conge/index" routerLinkActive="active">
            <mat-icon class="small-icon">history</mat-icon>
            <span>Historique</span>
          </a>
          <a routerLink="/conge/create" routerLinkActive="active">
            <mat-icon class="small-icon">add_circle_outline</mat-icon>
            <span>Cr√©ation</span>
          </a>
        </div>
      </div>


      <!-- ‚ùå SUPPRIM√â: Menu Permissions fusionn√© dans Gestion des Absences -->

      <!-- Remboursements -->
      <div>
        <a (click)="toggleRemb()" [class.active]="showRemb" style="cursor:pointer;" title="Remboursements">
          <div style="display:flex; align-items:center; gap:0.75rem;">
            <mat-icon>payments</mat-icon> <!-- üîÑ MODIFI√â: favorite_border ‚Üí payments -->
            <span *ngIf="!isCollapsed">Remboursements</span>
          </div>
          <mat-icon class="chevron" *ngIf="!isCollapsed">{{ showRemb ? 'expand_less' : 'expand_more' }}</mat-icon>
        </a>
        <div *ngIf="showRemb && !isCollapsed" class="submenu">
          <a routerLink="/remboursement/demandes" routerLinkActive="active">
            <mat-icon class="small-icon">history</mat-icon>
            <span>Demandes (liste)</span>
          </a>
          <a routerLink="/remboursement/demandes/create" routerLinkActive="active">
            <mat-icon class="small-icon">add_circle_outline</mat-icon>
            <span>Nouvelle demande</span>
          </a>
          <a routerLink="/remboursement/etats" routerLinkActive="active">
            <mat-icon class="small-icon">receipt_long</mat-icon>
            <span>√âtats</span>
          </a>
        </div>
      </div>
      <div>
        <a (click)="togglePec()" [class.active]="showPec" style="cursor:pointer;" title="Pris en charge">
          <div style="display:flex; align-items:center; gap:0.75rem;">
            <mat-icon>local_hospital</mat-icon> <!-- üîÑ MODIFI√â: favorite_border ‚Üí local_hospital -->
            <span *ngIf="!isCollapsed">Pris en charge</span>
          </div>
          <mat-icon class="chevron" *ngIf="!isCollapsed">{{ showPec ? 'expand_less' : 'expand_more' }}</mat-icon>
        </a>
        <div *ngIf="showPec && !isCollapsed" class="submenu">
          <a routerLink="/remboursement/prises-en-charge" routerLinkActive="active">
            <mat-icon class="small-icon">assignment</mat-icon>
            <span>Prises en charge</span>
          </a>
          <a routerLink="/remboursement/prises-en-charge/create" routerLinkActive="active">
            <mat-icon class="small-icon">add_task</mat-icon>
            <span>Nouvelle PEC</span>
          </a>
        </div>
      </div>
      <a style="opacity:0.7; cursor: not-allowed;" title="Employ√©s">
        <mat-icon>people_outline</mat-icon>
        <span *ngIf="!isCollapsed">Employ√©s</span>
      </a>
      <!-- Centres de Sant√© -->
      <a routerLink="/remboursement/centres" routerLinkActive="active" title="Centres de Sant√©">
        <mat-icon>business</mat-icon>
        <span *ngIf="!isCollapsed">Centres de Sant√©</span>
      </a>
      <a routerLink="/parametre/index" routerLinkActive="active" title="Param√®tres">
        <mat-icon>settings</mat-icon>
        <span *ngIf="!isCollapsed">Param√®tres</span>
      </a>

    </nav>

    <div class="logout-section">
      <a (click)="logout()" style="cursor: pointer;" title="D√©connexion">
        <mat-icon>logout</mat-icon>
        <span *ngIf="!isCollapsed">D√©connexion</span>
      </a>
    </div>
  </aside>

  <section class="content">
    <app-header></app-header>
    <router-outlet></router-outlet>
    <footer class="footer">
      <span>¬© 2025 GRH ARMP - Tous droits r√©serv√©s</span>
    </footer>
  </section>

  <!-- ========== CHATBOT - Accessible sur toutes les pages ========== -->
  <app-chatbot></app-chatbot>
</div>